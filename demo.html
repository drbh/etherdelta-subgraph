<!DOCTYPE html>
<html>

<head>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <title></title>
</head>

<body>
	<div id="main"></div>
</body>
<script>
var newCodes = function() {
    var settings = {
        "async": true,
        "crossDomain": true,
        "url": "https://api.thegraph.com/subgraphs/name/drbh/etherdelta",
        "method": "POST",
        "headers": {
            "content-type": "application/json"
        },
        "data": "{\"query\":\"{\\n  trades(where: {tokenGet: \\\"0xe0b7927c4af23765cb51314a0e0521a9645f0e2a\\\"}){\\n    tokenGet\\n    amountGet\\n    tokenGive\\n    amountGive\\n    get\\n    give\\n  }\\n}\"}"
    }

    $.ajax(settings).done(function(response) {
        // console.log(response);
        response = JSON.parse(response)
        console.log(response.data.trades[0])

        html = ''
        for (let trade of response.data.trades) {
        	html += "<div>" + trade["amountGet"] + ' ' + trade["amountGive"] + " " + trade["get"] + ' ' + trade["give"] + "</div>"
        }
        $("#main").html(html)
    });
}

setInterval(function(){ 
	newCodes()
}, 1000);


</script>

</html>